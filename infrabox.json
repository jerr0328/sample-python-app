{
  "version": 1,
  "jobs": [
    {
      "type": "docker",
      "name": "test",
      "resources": {
        "limits": {
          "cpu": 1,
          "memory": 512
        }
      },
      "build_only": false,
      "docker_file": "tests/Dockerfile"
    },
    {
      "type": "docker",
      "name": "sample-app",
      "docker_file": "Dockerfile",
      "build_only": true,
      "resources": {
        "limits": {
          "cpu": 1,
          "memory": 512
        }
      },
      "deployments": [
        {
          "type": "docker-registry",
          "host": "jerr0328",
          "repository": "sample-app",
          "username": "jerr0328",
          "password": {
            "$secret": "DOCKER_PASSWORD"
          }
        }
      ],
      "depends_on": [
        "test"
      ]
    }
  ]
}
